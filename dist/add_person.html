<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Add Person</title>

    <!--BootStrap CDN-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    
    <!-- This link connect html file to overall stylesheet named styles.css-->
    <link rel="stylesheet" href="styles.css">

    <!-- This Link connects to freeawesome icons -->
    <script src="https://kit.fontawesome.com/01f542bdd3.js" crossorigin="anonymous"></script>

    <!--This section allows to get font from GOOGLE Fonts - Namely Fredoka for headers and Raleway for paragraph-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;600&family=Raleway&display=swap" rel="stylesheet">

    <!-- This section contains the script needed for Google autocomplete API -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDzYcc7UvCEeHuUgpcvplM0COLpkSrdl4&libraries=places"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" crossorigin="anonymous"></script>

    <!-- Vue CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  </head>


  <body id="add-person">
    <!--Sticky Top Nav Bar Section-->
    <nav class="navbar sticky-top navbar-expand-lg px-5">

      <!-- Navbar Logo -->
      <a class="navbar-brand" href="#">RoofBlanket</a>
      <!-- End Of Navbar Logo -->

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Nav Bar Content -->
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <!--Nav Links-->
        <ul class="navbar-nav">
          <!--Call User's Profile Name-->
          <li class="navbar-text mx-5">
            Hello, Wai Soon
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="profile.html">Profile</a>
          </li> 
          <li class="nav-item">
            <a class="nav-link" href="chat.html">Chat</a>
          </li>
          <li class="nav-item" style="margin-right: 30px;">
            <a class="nav-link" href="task_list.html">Task List</a>
          </li>
          <li class="nav-item">
            <button type="button" class="btn" href="login.html">Login</button>
          </li>
        </ul>
        <!-- End Of Nav Links-->
      </div>
      <!-- End Of Nav Bar Content -->
    </nav>
    <!-- End Of Sticky Top Nav Bar Section -->

    <!-- Form Creation -->
    <div class="container mt-5">
      <!-- Start of Form Section-->
      <form action="index.html" class="form_content">
        <div class="row">

          <!--Header Listing Form-->
          <h4>Who are you listing?</h4>
          <!--First Field (1st Row)-->
          <div class="input-group input-group-icon">
            <input type="text" placeholder="Full Name" id="person_name"/>
            <div class="input-icon">
              <i class="fa fa-user"></i>
            </div>
          </div>
          <!-- Second Field (2nd Row)-->
          <div class="input-group input-group-icon">
            <input type="number" placeholder="Age" max="80" min="20" id="age"/>
            <div class="input-icon">
              <i class="fa-solid fa-users"></i>
            </div>
          </div>
          <!-- Third Field (3rd Row)-->
          <div class="input-group input-group-icon">
            <input type="text" placeholder="Location" id="location"/>
            <div class="input-icon">
              <i class="fa-solid fa-location-dot"></i>
            </div>
          </div>
          <!-- End Of Field Section-->
        </div>

        <div class="row">
          <!-- Special Needs Col -->
          <div class="col-half">
            <h4>Special Needs?</h4>
            <div class="input-group">
              <input id="special-yes" type="radio" name="specialneeds" value="yes"/>
              <label for="special-yes">Yes</label>
              <input id="special-no" type="radio" name="specialneeds" value="no"/>
              <label for="special-no">No</label>
            </div>
          </div>
          <!-- Gender Col -->
          <div class="col-half">
            <h4>Gender</h4>
            <div class="input-group">
              <input id="gender-male" type="radio" name="gender" value="male"/>
              <label for="gender-male">Male</label>
              <input id="gender-female" type="radio" name="gender" value="female"/>
              <label for="gender-female">Female</label>
            </div>
          </div>
          <!--End Of 4th Row-->
        </div>

        <!-- Start of 5th Row -->
        <!-- Seeking Employment -->
        <div class="row">
          <div class="col-half">
            <h4>Seeking Employment?</h4>
            <div class="input-group">
              <input id="employment-yes" type="radio" name="employment" value="yes"/>
              <label for="employment-yes">Yes</label>
              <input id="employment-no" type="radio" name="employment" value="no"/>
              <label for="employment-no">No</label>
            </div>
          </div>

          <!-- Duration of Stay -->
          <div class="col-half">
            <h4>Duration of Stay (Months)</h4>
            <div class="input-group">
              <select class="form-select" style="border-radius: 3px; box-sizing: border-box; background-color: #f9f9f9; border: 1px solid #e5e5e5;" id='duration'>
                <option value="1" default>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Description + Upload Image Row -->
        <div class="row">
          <div class="col-half">
            <h4>Description</h4>
            <div class="input-group">
              <div class="mb-3" name="description">
                <textarea class="form-control" rows="6" cols="100" id="description" placeholder="Please describe the person of interest.." required style="color: black;"></textarea>
              </div>
            </div>
          </div>

          <!-- Image -->
          <div class="col-half">
            <h4>Upload Image</h4>
            <div class="input-group">
              <!-- Add Image Side (Right) -->
                <form action="" id="user_inputs">
                  <div class="image-drawer">
                    <i class="fa-solid fa-image"></i>

                    <!-- For Uploading Image -->
                    <input id="upload" class='mb-2' type="file" multiple="multiple" accept="image/jpeg, image/png, image/jpg">

                    <!-- Display Image Uploaded -->
                    <div class="image-wrapper col-md-12 col-sm-2">
                      <output id="result">
                    </div>
                  </div>
            </div>
          </div>
        </div>
        <!-- End Of Desc + Image Upload Row-->

        <!-- Terms & Condition Row -->
        <div class="row">
          <h4>Terms and Conditions</h4>
          <div class="input-group">
            <input id="terms" type="checkbox"/>
            <label for="terms">I accept the terms and conditions for listing on this platform, and hereby confirm I have read the privacy policy.</label>
          </div>
        </div>
        <!-- End Of Terms & Condition Row-->


      <!--Here We input Upload or cancel button-->
        <div class="listing-button d-grid gap-2 d-md-flex justify-content-md-end mb-3">
          <button class="list-btn" type="button">Cancel</button>
          <button onclick="getLatLng()" class="list-btn" type="submit">Upload</button>
        </div>
      <!-- End Of Form and Buttons Section-->
      </form>
    </div>

    <!-- Backend Database -->
    <script src="bundle.js"> </script>

    <!-- Boot Strap Java CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>


    <!-- For uploading Image-->
    <script>
      document.querySelector("#upload").addEventListener("change", (e) => { 
      if (window.File && window.FileReader && window.FileList && window.Blob) {
        const files = e.target.files;
        const output = document.querySelector("#result");
        output.innerHTML = "";
        for (let i = 0; i < files.length; i++) {
          if (!files[i].type.match("image")) continue;
            const picReader = new FileReader();
            picReader.addEventListener("load", function (event) {
              const picFile = event.target;
              const div = document.createElement("div");
              div.innerHTML = `<img class="thumbnail mb-1" src="${picFile.result}" title="${picFile.name}"/>`;
              output.appendChild(div);
            });
            picReader.readAsDataURL(files[i]);
          }
      } else {
        alert("Your browser does not support File API");
      }
    });

    // GoogleAPI to auto complete location search and retrieve Lat and Lng values.
    var autocomplete = new google.maps.places.Autocomplete(document.getElementById('location'))

    function getLatLng() {
        // console.log(autocomplete)
        // console.log(autocomplete.gm_accessors_.place.nj.formattedPrediction)

        var geocoder = new google.maps.Geocoder()
        var address = autocomplete.gm_accessors_.place.nj.formattedPrediction
        // console.log(address)

        geocoder.geocode({ 'address': address }, function (results, status) {
            if (status == 'OK') {
                let lat = results[0].geometry.location.lat()
                let lng = results[0].geometry.location.lng()
                console.log(lat)
                console.log(lng)
                // store [lat, lng] in DB as array
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }
    </script>
  </body>
</html>


  </body>
</html>